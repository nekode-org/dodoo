import{j as e}from"./jsx-runtime.D_zvdyIk.js";import{r as c,R as x}from"./index.BJfUAbRs.js";import{s as i}from"./Datos.b136b202.ClPZ4vJD.js";const g=()=>{const[t,d]=c.useState([]),[a,r]=c.useState({});c.useEffect(()=>{const o=h("data");if(o){const s=JSON.parse(o);console.log("Datos recibidos:",s),d(s.ticketResults||[]),r(s.infoApiSat||{}),document.cookie="data=; path=/; max-age=0"}},[]);const h=o=>{const l=document.cookie.split("; ").find(p=>p.startsWith(`${o}=`));return l?decodeURIComponent(l.split("=")[1]):null},n=o=>{const{name:s,value:l}=o.target;r({...a,[s]:l})},m=async()=>{const o={ticketResults:t,infoApiSat:a};console.log("Datos a enviar:",JSON.stringify(o));try{const s=await fetch("http://localhost:3000/api/enviarDatos",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)});if(!s.ok)throw new Error("Error en la respuesta del servidor");const l=await s.json();console.log("Respuesta del servidor:",l),alert("Datos enviados con éxito")}catch(s){console.error("Error al enviar los datos:",s),alert("Hubo un error al enviar los datos")}};return e.jsxs("div",{className:i.Main,children:[e.jsxs("div",{className:i.contenedor,children:[e.jsx("h3",{children:"Tickets a facturar"}),e.jsxs("div",{className:i.contenido,children:[e.jsx("div",{className:i.columna,children:"No. de Ticket"}),e.jsx("div",{className:i.columna,children:"Fecha de consumo"}),e.jsx("div",{className:i.columna,children:"Monto"}),t.map((o,s)=>e.jsxs(x.Fragment,{children:[e.jsx("div",{className:i.columna,children:o.folio}),e.jsx("div",{className:i.columna,children:o.fecha}),e.jsx("div",{className:i.columna,children:o.monto})]},s))]})]}),e.jsxs("div",{className:i.Datos,children:[e.jsx("h3",{children:"Validación de datos"}),e.jsxs("div",{className:i.Form,children:[e.jsxs("div",{className:i.div,children:[e.jsx("label",{htmlFor:"email",children:"Correo electrónico"}),e.jsx("input",{type:"email",id:"email",name:"email",placeholder:"Correo electrónico",value:a.email||"",onChange:n})]}),e.jsx("div",{className:i.div1,children:e.jsxs("ol",{className:i.lista,children:[e.jsx("li",{children:"Revisa que todos los campos estén completos y correctos."}),e.jsx("li",{children:"Si encuentras algún dato incorrecto, corrígelo antes de continuar."}),e.jsx("li",{children:"Cuando todo esté listo, haz clic en el botón “Aceptar” para generar tu factura."})]})}),e.jsxs("div",{className:i.div,children:[e.jsx("label",{htmlFor:"pais",children:"País de origen"}),e.jsx("input",{type:"text",id:"pais",name:"pais",value:a.pais||"",onChange:n})]}),e.jsxs("div",{className:i.div,children:[e.jsx("label",{htmlFor:"rfc",children:"RFC"}),e.jsx("input",{type:"text",id:"rfc",name:"rfc",value:a.rfc||"",onChange:n})]}),e.jsxs("div",{className:i.div,children:[e.jsx("label",{htmlFor:"razonSocial",children:"Nombre o razón social"}),e.jsx("input",{type:"text",id:"razonSocial",name:"razonSocial",value:a.razonSocial||"",onChange:n})]}),e.jsxs("div",{className:i.div,children:[e.jsx("label",{htmlFor:"regimen",children:"Régimen fiscal"}),e.jsxs("select",{name:"regimen",id:"regimen",value:a.regimen||"",onChange:n,children:[e.jsx("option",{value:"",children:"Seleccione un régimen fiscal"}),e.jsx("option",{value:"opcion1",children:"Opción 1"}),e.jsx("option",{value:"opcion2",children:"Opción 2"}),e.jsx("option",{value:"opcion3",children:"Opción 3"}),e.jsx("option",{value:"opcion4",children:"Opción 4"}),e.jsx("option",{value:"opcion5",children:"Opción 5"})]})]}),e.jsxs("div",{className:i.div,children:[e.jsx("label",{htmlFor:"cfdi",children:"Uso de CFDI"}),e.jsxs("select",{name:"cfdi",id:"cfdi",value:a.cfdi||"",onChange:n,children:[e.jsx("option",{value:"",children:"Seleccione un uso de CFDI"}),e.jsx("option",{value:"opcion1",children:"Opción 1"}),e.jsx("option",{value:"opcion2",children:"Opción 2"}),e.jsx("option",{value:"opcion3",children:"Opción 3"}),e.jsx("option",{value:"opcion4",children:"Opción 4"}),e.jsx("option",{value:"opcion5",children:"Opción 5"})]})]}),e.jsxs("div",{className:i.div,children:[e.jsx("label",{htmlFor:"calle",children:"Calle"}),e.jsx("input",{type:"text",id:"calle",name:"calle",value:a.calle||"",onChange:n})]}),e.jsxs("div",{className:i.div,children:[e.jsx("label",{htmlFor:"noExt",children:"Número exterior"}),e.jsx("input",{type:"text",id:"noExt",name:"noExt",value:a.noExt||"",onChange:n})]}),e.jsxs("div",{className:i.div,children:[e.jsx("label",{htmlFor:"noInt",children:"Número interior"}),e.jsx("input",{type:"text",id:"noInt",name:"noInt",value:a.noInt||"",onChange:n})]}),e.jsxs("div",{className:i.div,children:[e.jsx("label",{htmlFor:"entidadFederativa",children:"Entidad Federativa"}),e.jsx("input",{type:"text",id:"entidadFederativa",name:"entidadFederativa",value:a.entidadFederativa||"",onChange:n})]}),e.jsxs("div",{className:i.div,children:[e.jsx("label",{htmlFor:"municipio",children:"Municipio"}),e.jsx("input",{type:"text",id:"municipio",name:"municipio",value:a.municipio||"",onChange:n})]}),e.jsxs("div",{className:i.div,children:[e.jsx("label",{htmlFor:"colonia",children:"Colonia"}),e.jsx("input",{type:"text",id:"colonia",name:"colonia",value:a.colonia||"",onChange:n})]}),e.jsxs("div",{className:i.div,children:[e.jsx("label",{htmlFor:"codigoPostal",children:"Código postal"}),e.jsx("input",{type:"text",id:"codigoPostal",name:"codigoPostal",value:a.codigoPostal||"",onChange:n})]})]}),e.jsx("button",{className:i.boton,onClick:m,children:"Enviar"})]})]})};export{g as default};
