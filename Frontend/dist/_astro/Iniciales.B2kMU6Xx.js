import{j as e}from"./jsx-runtime.D_zvdyIk.js";import{r as i}from"./index.BJfUAbRs.js";import{s}from"./index.95d291e9.F47FPULG.js";const k=({folio:r,onInputChange:n})=>e.jsxs("div",{className:s.Elemento,children:[e.jsx("input",{type:"text",name:"ticketCode",placeholder:"Folio de ticket",className:s.Folio,value:r.ticketCode,onChange:l=>n(r.id,"ticketCode",l.target.value)}),e.jsxs("select",{name:"providerCode",className:s.Empresa,value:r.providerCode||"",onChange:l=>n(r.id,"providerCode",parseInt(l.target.value,10)),children:[e.jsx("option",{value:"",disabled:!0,children:"Selecciona una empresa"}),e.jsx("option",{value:"1",children:"Empresa 1"}),e.jsx("option",{value:"2",children:"Empresa 2"}),e.jsx("option",{value:"3",children:"Empresa 3"})]})]}),b=()=>{const[r,n]=i.useState({email:"",rfc:"",rfcPdf:null,rfcPdfName:null,tickets:[{id:Date.now(),ticketCode:"",providerCode:null}]}),[l,P]=i.useState([]),[h,c]=i.useState(!1),[F,d]=i.useState(0),v=()=>{n({...r,tickets:[...r.tickets,{id:Date.now(),ticketCode:"",providerCode:null}]})},f=a=>{n({...r,tickets:r.tickets.filter(t=>t.id!==a)})},g=(a,t,o)=>{n({...r,tickets:r.tickets.map(p=>p.id===a?{...p,[t]:o}:p)})},u=a=>{const{name:t,value:o}=a.target;n({...r,[t]:o})},m=a=>{if(a){const t=new FileReader;t.onload=()=>{n({...r,rfcPdf:t.result.split(",")[1],rfcPdfName:a.name})},t.readAsDataURL(a)}else n({...r,rfcPdf:null,rfcPdfName:null})},x=a=>{a.preventDefault(),a.stopPropagation(),c(!1),d(0);const t=a.dataTransfer.files[0];t&&t.type==="application/pdf"?m(t):alert("Por favor, arrastra un archivo PDF vÃ¡lido.")},j=a=>{a.preventDefault(),a.stopPropagation()},C=a=>{a.preventDefault(),a.stopPropagation(),d(t=>t+1),c(!0)},D=a=>{a.preventDefault(),a.stopPropagation(),d(t=>{const o=t-1;return o===0&&c(!1),o})},N=async()=>{const a={...r,tickets:r.tickets.map(({id:t,...o})=>o)};console.log("Datos del formulario:",JSON.stringify(a));try{window.location.href="/"}catch(t){console.error("Error al enviar el formulario:",t),alert("Error al enviar el formulario. Por favor, intÃ©ntalo de nuevo.")}};return e.jsxs("div",{className:s.fullScreenDropZone,onDrop:x,onDragOver:j,onDragEnter:C,onDragLeave:D,children:[h&&e.jsx("div",{className:s.dragOverlay,children:e.jsx("p",{children:"Suelta el archivo aquÃ­"})}),e.jsxs("div",{className:s.principal,children:[e.jsxs("label",{className:s.email,children:["Ingresa tu correo electrÃ³nico:",e.jsx("input",{type:"email",name:"email",value:r.email,onChange:u})]}),e.jsxs("div",{className:s.rfcContainer,children:[e.jsxs("div",{className:s.rfcPDF,children:[e.jsxs("label",{children:["Carga tu informaciÃ³n fÃ­scal en PDF.",e.jsx("p",{style:{color:"gray"},children:"Arrastra y suelta el archivo aquÃ­ o selecciona uno"}),e.jsx("input",{type:"file",accept:"application/pdf",onChange:a=>m(a.target.files[0])})]}),r.rfcPdfName&&e.jsxs("p",{style:{color:"green"},children:["Archivo cargado: ",r.rfcPdfName]})]}),e.jsx("p",{children:"O"}),e.jsxs("label",{className:s.rfcText,children:["Ingresar tu RFC:",e.jsx("input",{type:"text",name:"rfc",value:r.rfc,onChange:u})]})]}),e.jsxs("div",{className:s.foliosContainer,children:[e.jsxs("div",{className:s.Titulos,children:[e.jsx("h3",{children:"Ingresa el nÃºmero de ticket"}),e.jsx("h3",{className:s.Titulito,children:"Selecciona la empresa correspondiente al ticket"})]}),r.tickets.map(a=>e.jsxs("div",{className:s.folioitem,children:[e.jsx(k,{folio:a,onInputChange:g}),e.jsx("button",{onClick:()=>f(a.id),className:s.Basura,children:"ðŸ—‘"})]},a.id))]}),e.jsxs("div",{className:s.botonera,children:[e.jsx("button",{onClick:v,children:"Agregar Folio"}),e.jsx("button",{onClick:N,children:"Enviar Formulario"})]})]})]})};export{b as default};
