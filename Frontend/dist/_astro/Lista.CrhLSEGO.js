import{j as e}from"./jsx-runtime.D_zvdyIk.js";import{r as c,R as x}from"./index.BJfUAbRs.js";import{s as i}from"./Datos.b136b202.ClPZ4vJD.js";const g=()=>{const[t,d]=c.useState([]),[n,r]=c.useState({});c.useEffect(()=>{const a=h("data");if(a){const s=JSON.parse(a);console.log("Datos recibidos:",s),d(s.ticketResults||[]),r(s.infoApiSat||{}),document.cookie="data=; path=/; max-age=0"}},[]);const h=a=>{const l=document.cookie.split("; ").find(p=>p.startsWith(`${a}=`));return l?decodeURIComponent(l.split("=")[1]):null},o=a=>{const{name:s,value:l}=a.target;r({...n,[s]:l})},m=async()=>{const a={ticketResults:t,infoApiSat:n};console.log("Datos a enviar:",JSON.stringify(a));try{const s=await fetch("/providers/confirmInfo",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(!s.ok)throw new Error("Error en la respuesta del servidor");const l=await s.json();console.log("Respuesta del servidor:",l),alert("Datos enviados con éxito"),window.location.href="/index.html"}catch(s){console.error("Error al enviar los datos:",s),alert("Hubo un error al enviar los datos")}};return e.jsxs("div",{className:i.Main,children:[e.jsxs("div",{className:i.contenedor,children:[e.jsx("h3",{children:"Tickets a facturar"}),e.jsxs("div",{className:i.contenido,children:[e.jsx("div",{className:i.columna,children:"No. de Ticket"}),e.jsx("div",{className:i.columna,children:"Fecha de consumo"}),e.jsx("div",{className:i.columna,children:"Monto"}),t.map((a,s)=>e.jsxs(x.Fragment,{children:[e.jsx("div",{className:i.columna,children:a.folio}),e.jsx("div",{className:i.columna,children:a.fecha}),e.jsx("div",{className:i.columna,children:a.monto})]},s))]})]}),e.jsxs("div",{className:i.Datos,children:[e.jsx("h3",{children:"Validación de datos"}),e.jsxs("div",{className:i.Form,children:[e.jsxs("div",{className:i.div,children:[e.jsx("label",{htmlFor:"email",children:"Correo electrónico"}),e.jsx("input",{type:"email",id:"email",name:"email",placeholder:"Correo electrónico",value:n.email||"",onChange:o})]}),e.jsx("div",{className:i.div1,children:e.jsxs("ol",{className:i.lista,children:[e.jsx("li",{children:"Revisa que todos los campos estén completos y correctos."}),e.jsx("li",{children:"Si encuentras algún dato incorrecto, corrígelo antes de continuar."}),e.jsx("li",{children:"Cuando todo esté listo, haz clic en el botón “Aceptar” para generar tu factura."})]})}),e.jsxs("div",{className:i.div,children:[e.jsx("label",{htmlFor:"pais",children:"País de origen"}),e.jsx("input",{type:"text",id:"pais",name:"pais",value:n.pais||"",onChange:o})]}),e.jsxs("div",{className:i.div,children:[e.jsx("label",{htmlFor:"rfc",children:"RFC"}),e.jsx("input",{type:"text",id:"rfc",name:"rfc",value:n.rfc||"",onChange:o})]}),e.jsxs("div",{className:i.div,children:[e.jsx("label",{htmlFor:"razonSocial",children:"Nombre o razón social"}),e.jsx("input",{type:"text",id:"razonSocial",name:"razonSocial",value:n.razonSocial||"",onChange:o})]}),e.jsxs("div",{className:i.div,children:[e.jsx("label",{htmlFor:"regimen",children:"Régimen fiscal"}),e.jsxs("select",{name:"regimen",id:"regimen",value:n.regimen||"",onChange:o,children:[e.jsx("option",{value:"",children:"Seleccione un régimen fiscal"}),e.jsx("option",{value:"opcion1",children:"Opción 1"}),e.jsx("option",{value:"opcion2",children:"Opción 2"}),e.jsx("option",{value:"opcion3",children:"Opción 3"}),e.jsx("option",{value:"opcion4",children:"Opción 4"}),e.jsx("option",{value:"opcion5",children:"Opción 5"})]})]}),e.jsxs("div",{className:i.div,children:[e.jsx("label",{htmlFor:"cfdi",children:"Uso de CFDI"}),e.jsxs("select",{name:"cfdi",id:"cfdi",value:n.cfdi||"",onChange:o,children:[e.jsx("option",{value:"",children:"Seleccione un uso de CFDI"}),e.jsx("option",{value:"opcion1",children:"Opción 1"}),e.jsx("option",{value:"opcion2",children:"Opción 2"}),e.jsx("option",{value:"opcion3",children:"Opción 3"}),e.jsx("option",{value:"opcion4",children:"Opción 4"}),e.jsx("option",{value:"opcion5",children:"Opción 5"})]})]}),e.jsxs("div",{className:i.div,children:[e.jsx("label",{htmlFor:"calle",children:"Calle"}),e.jsx("input",{type:"text",id:"calle",name:"calle",value:n.calle||"",onChange:o})]}),e.jsxs("div",{className:i.div,children:[e.jsx("label",{htmlFor:"noExt",children:"Número exterior"}),e.jsx("input",{type:"text",id:"noExt",name:"noExt",value:n.noExt||"",onChange:o})]}),e.jsxs("div",{className:i.div,children:[e.jsx("label",{htmlFor:"noInt",children:"Número interior"}),e.jsx("input",{type:"text",id:"noInt",name:"noInt",value:n.noInt||"",onChange:o})]}),e.jsxs("div",{className:i.div,children:[e.jsx("label",{htmlFor:"entidadFederativa",children:"Entidad Federativa"}),e.jsx("input",{type:"text",id:"entidadFederativa",name:"entidadFederativa",value:n.entidadFederativa||"",onChange:o})]}),e.jsxs("div",{className:i.div,children:[e.jsx("label",{htmlFor:"municipio",children:"Municipio"}),e.jsx("input",{type:"text",id:"municipio",name:"municipio",value:n.municipio||"",onChange:o})]}),e.jsxs("div",{className:i.div,children:[e.jsx("label",{htmlFor:"colonia",children:"Colonia"}),e.jsx("input",{type:"text",id:"colonia",name:"colonia",value:n.colonia||"",onChange:o})]}),e.jsxs("div",{className:i.div,children:[e.jsx("label",{htmlFor:"codigoPostal",children:"Código postal"}),e.jsx("input",{type:"text",id:"codigoPostal",name:"codigoPostal",value:n.codigoPostal||"",onChange:o})]})]}),e.jsx("button",{className:i.boton,onClick:m,children:"Enviar"})]})]})};export{g as default};
