import{j as e}from"./jsx-runtime.D_zvdyIk.js";import{r as p}from"./index.BJfUAbRs.js";import{s as n}from"./index.95d291e9.F47FPULG.js";const N=({folio:r,onInputChange:s})=>e.jsxs("div",{className:n.Elemento,children:[e.jsx("input",{type:"text",name:"ticketCode",placeholder:"Folio de ticket",className:n.Folio,value:r.ticketCode,onChange:l=>s(r.id,"ticketCode",l.target.value)}),e.jsxs("select",{name:"providerCode",className:n.Empresa,value:r.providerCode||"",onChange:l=>s(r.id,"providerCode",parseInt(l.target.value,10)),children:[e.jsx("option",{value:"",disabled:!0,children:"Selecciona una empresa"}),e.jsx("option",{value:"1",children:"Empresa 1"}),e.jsx("option",{value:"2",children:"Empresa 2"}),e.jsx("option",{value:"3",children:"Empresa 3"})]})]}),E=()=>{const[r,s]=p.useState({email:"",rfc:"",rfcPdf:null,rfcPdfName:null,tickets:[{id:Date.now(),ticketCode:"",providerCode:null}]}),[l,i]=p.useState(!1),[k,c]=p.useState(0),h=()=>{s({...r,tickets:[...r.tickets,{id:Date.now(),ticketCode:"",providerCode:null}]})},f=a=>{s({...r,tickets:r.tickets.filter(t=>t.id!==a)})},v=(a,t,o)=>{s({...r,tickets:r.tickets.map(d=>d.id===a?{...d,[t]:o}:d)})},u=a=>{const{name:t,value:o}=a.target;s({...r,[t]:o})},m=a=>{if(a){const t=new FileReader;t.onload=()=>{s({...r,rfcPdf:t.result.split(",")[1],rfcPdfName:a.name})},t.readAsDataURL(a)}else s({...r,rfcPdf:null,rfcPdfName:null})},g=a=>{a.preventDefault(),a.stopPropagation(),i(!1),c(0);const t=a.dataTransfer.files[0];t&&t.type==="application/pdf"?m(t):alert("Por favor, arrastra un archivo PDF vÃ¡lido.")},x=a=>{a.preventDefault(),a.stopPropagation()},j=a=>{a.preventDefault(),a.stopPropagation(),c(t=>t+1),i(!0)},C=a=>{a.preventDefault(),a.stopPropagation(),c(t=>{const o=t-1;return o===0&&i(!1),o})},D=async()=>{const a={...r,tickets:r.tickets.map(({id:t,...o})=>o)};console.log("Datos del formulario:",JSON.stringify(a));try{document.cookie=await`data=${encodeURIComponent(JSON.stringify(a))}; path=/; max-age=3600`,window.location.href="/Datos"}catch(t){console.error("Error al enviar el formulario:",t),alert("Error al enviar el formulario. Por favor, intÃ©ntalo de nuevo.")}};return e.jsxs("div",{className:n.fullScreenDropZone,onDrop:g,onDragOver:x,onDragEnter:j,onDragLeave:C,children:[l&&e.jsx("div",{className:n.dragOverlay,children:e.jsx("p",{children:"Suelta el archivo aquÃ­"})}),e.jsxs("div",{className:n.principal,children:[e.jsxs("label",{className:n.email,children:["Ingresa tu correo electrÃ³nico:",e.jsx("input",{type:"email",name:"email",value:r.email,onChange:u})]}),e.jsxs("div",{className:n.rfcContainer,children:[e.jsxs("div",{className:n.rfcPDF,children:[e.jsxs("label",{children:["Carga tu informaciÃ³n fÃ­scal en PDF.",e.jsx("p",{style:{color:"gray"},children:"Arrastra y suelta el archivo aquÃ­ o selecciona uno"}),e.jsx("input",{type:"file",accept:"application/pdf",onChange:a=>m(a.target.files[0])})]}),r.rfcPdfName&&e.jsxs("p",{style:{color:"green"},children:["Archivo cargado: ",r.rfcPdfName]})]}),e.jsx("p",{children:"O"}),e.jsxs("label",{className:n.rfcText,children:["Ingresar tu RFC:",e.jsx("input",{type:"text",name:"rfc",value:r.rfc,onChange:u})]})]}),e.jsxs("div",{className:n.foliosContainer,children:[e.jsxs("div",{className:n.Titulos,children:[e.jsx("h3",{children:"Ingresa el nÃºmero de ticket"}),e.jsx("h3",{className:n.Titulito,children:"Selecciona la empresa correspondiente al ticket"})]}),r.tickets.map(a=>e.jsxs("div",{className:n.folioitem,children:[e.jsx(N,{folio:a,onInputChange:v}),e.jsx("button",{onClick:()=>f(a.id),className:n.Basura,children:"ðŸ—‘"})]},a.id))]}),e.jsxs("div",{className:n.botonera,children:[e.jsx("button",{onClick:h,children:"Agregar Folio"}),e.jsx("button",{onClick:D,children:"Enviar Formulario"})]})]})]})};export{E as default};
